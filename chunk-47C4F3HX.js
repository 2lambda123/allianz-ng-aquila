import{a as U,d as ae,e as ce,g as he}from"./chunk-25NSX5VO.js";import{w as Q}from"./chunk-CTAMBHIU.js";import{a as A,b}from"./chunk-ULYGIILG.js";import{B as de}from"./chunk-ZT3EPJ7I.js";import{$b as ne,Ac as N,B as Y,Bb as y,Da as j,Db as m,Gb as B,Jb as k,L as J,Lb as ie,Mb as se,Qb as L,U as V,Yb as F,a as K,ac as re,b as X,d as Z,ea as D,jc as x,ma as E,mb as g,n as p,ob as te,q as v,qa as ee,qb as I,s as z,ua as M,ub as a,va as w,wa as h,wb as T,wc as oe,xc as C,yc as R,z as G,zc as O}from"./chunk-KKDUGSQP.js";var H=class{constructor(){this.expansionModel=new he(!0)}toggle(t){this.expansionModel.toggle(this._trackByValue(t))}expand(t){this.expansionModel.select(this._trackByValue(t))}collapse(t){this.expansionModel.deselect(this._trackByValue(t))}isExpanded(t){return this.expansionModel.isSelected(this._trackByValue(t))}toggleDescendants(t){this.expansionModel.isSelected(this._trackByValue(t))?this.collapseDescendants(t):this.expandDescendants(t)}collapseAll(){this.expansionModel.clear()}expandDescendants(t){let d=[t];d.push(...this.getDescendants(t)),this.expansionModel.select(...d.map(e=>this._trackByValue(e)))}collapseDescendants(t){let d=[t];d.push(...this.getDescendants(t)),this.expansionModel.deselect(...d.map(e=>this._trackByValue(e)))}_trackByValue(t){return this.trackBy?this.trackBy(t):t}},P=class extends H{constructor(t,d,e){super(),this.getLevel=t,this.isExpandable=d,this.options=e,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(t){let d=this.dataNodes.indexOf(t),e=[];for(let i=d+1;i<this.dataNodes.length&&this.getLevel(t)<this.getLevel(this.dataNodes[i]);i++)e.push(this.dataNodes[i]);return e}expandAll(){this.expansionModel.select(...this.dataNodes.map(t=>this._trackByValue(t)))}};var De=new ee("CDK_TREE_NODE_OUTLET_NODE"),le=(()=>{let t=class t{constructor(e,i){this.viewContainer=e,this._node=i}};t.\u0275fac=function(i){return new(i||t)(a(k),a(De,8))},t.\u0275dir=h({type:t,selectors:[["","cdkTreeNodeOutlet",""]]});let r=t;return r})(),$=class{constructor(t){this.$implicit=t}},S=(()=>{let t=class t{constructor(e){this.template=e}};t.\u0275fac=function(i){return new(i||t)(a(oe))},t.\u0275dir=h({type:t,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}});let r=t;return r})();var u=(()=>{let t=class t{get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}constructor(e,i){this._differs=e,this._changeDetectorRef=i,this._onDestroy=new p,this._levels=new Map,this.viewChange=new v({start:0,end:Number.MAX_VALUE})}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy),this.treeControl}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){let e=this._nodeDefs.filter(i=>!i.when);e.length>1,this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(e){this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let e;ce(this._dataSource)?e=this._dataSource.connect(this):G(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=z(this._dataSource)),e&&(this._dataSubscription=e.pipe(D(this._onDestroy)).subscribe(i=>this.renderNodeChanges(i)))}renderNodeChanges(e,i=this._dataDiffer,s=this._nodeOutlet.viewContainer,n){let o=i.diff(e);o&&(o.forEachOperation((c,_,f)=>{if(c.previousIndex==null)this.insertNode(e[f],f,s,n);else if(f==null)s.remove(_),this._levels.delete(c.item);else{let _e=s.get(_);s.move(_e,f)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(e,i){if(this._nodeDefs.length===1)return this._nodeDefs.first;let s=this._nodeDefs.find(n=>n.when&&n.when(i,e))||this._defaultNodeDef;return s}insertNode(e,i,s,n){let o=this._getNodeDef(e,i),c=new $(e);this.treeControl.getLevel?c.level=this.treeControl.getLevel(e):typeof n<"u"&&this._levels.has(n)?c.level=this._levels.get(n)+1:c.level=0,this._levels.set(e,c.level),(s||this._nodeOutlet.viewContainer).createEmbeddedView(o.template,c,i),l.mostRecentTreeNode&&(l.mostRecentTreeNode.data=e)}};t.\u0275fac=function(i){return new(i||t)(a(I),a(T))},t.\u0275cmp=M({type:t,selectors:[["cdk-tree"]],contentQueries:function(i,s,n){if(i&1&&O(n,S,5),i&2){let o;C(o=N())&&(s._nodeDefs=o)}},viewQuery:function(i,s){if(i&1&&R(le,7),i&2){let n;C(n=N())&&(s._nodeOutlet=n.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(i,s){i&1&&L(0,0)},dependencies:[le],encapsulation:2});let r=t;return r})(),l=(()=>{let t=class t{get role(){return"treeitem"}set role(e){this._elementRef.nativeElement.setAttribute("role",e)}get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}constructor(e,i){this._elementRef=e,this._tree=i,this._destroyed=new p,this._dataChanges=new p,t.mostRecentTreeNode=this,this.role="treeitem"}ngOnInit(){this._parentNodeAriaLevel=ye(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){t.mostRecentTreeNode===this&&(t.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){!this._tree.treeControl.isExpandable&&this._tree.treeControl.getChildren,this.role="treeitem"}};t.mostRecentTreeNode=null,t.\u0275fac=function(i){return new(i||t)(a(g),a(u))},t.\u0275dir=h({type:t,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(i,s){i&2&&m("aria-expanded",s.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"]});let r=t;return r})();function ye(r){let t=r.parentElement;for(;t&&!me(t);)t=t.parentElement;return t?t.classList.contains("cdk-nested-tree-node")?b(t.getAttribute("aria-level")):0:-1}function me(r){let t=r.classList;return!!(t?.contains("cdk-nested-tree-node")||t?.contains("cdk-tree"))}var W=(()=>{let t=class t{get recursive(){return this._recursive}set recursive(e){this._recursive=A(e)}constructor(e,i){this._tree=e,this._treeNode=i,this._recursive=!1}_toggle(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()}};t.\u0275fac=function(i){return new(i||t)(a(u),a(l))},t.\u0275dir=h({type:t,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(i,s){i&1&&F("click",function(o){return s._toggle(o)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}});let r=t;return r})();var ue=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=w({type:t}),t.\u0275inj=E({});let r=t;return r})();var Ce=["*"],Ne=(()=>{let t=class t{constructor(e){this._elementRef=e}focus(){this._elementRef.nativeElement.focus()}};t.\u0275fac=function(i){return new(i||t)(a(g))},t.\u0275dir=h({type:t,selectors:[["","nxTreeNodeActionItem",""]],hostVars:1,hostBindings:function(i,s){i&2&&m("tabindex",-1)}});let r=t;return r})(),q=class{transformFunction(t,d){let s=t,{children:e}=s,i=Z(s,["children"]);return X(K({},i),{level:d,expandable:Array.isArray(e)&&e.length>0})}getLevel(t){return t.level}isExpandable(t){return t.expandable}getChildren(t){return t.children}_flattenNode(t,d,e,i){let s=this.transformFunction(t,d);if(e.push(s),this.isExpandable(s)){let n=this.getChildren(t);Array.isArray(n)?this._flattenChildren(n,d,e,i):n.pipe(V(1)).subscribe(o=>{this._flattenChildren(o,d,e,i)})}return e}_flattenChildren(t,d,e,i){t.forEach((s,n)=>{let o=i.slice();o.push(n!==t.length-1),this._flattenNode(s,d+1,e,o)})}flattenNodes(t){let d=[];return t.forEach(e=>this._flattenNode(e,0,d,[])),d}expandFlattenedNodes(t,d){let e=[],i=[];return i[0]=!0,t.forEach(s=>{let n=!0;for(let o=0;o<=this.getLevel(s);o++)n=n&&i[o];n&&e.push(s),this.isExpandable(s)&&(i[this.getLevel(s)+1]=d.isExpanded(s))}),e}},fe=class extends ae{set data(t){this._data.next(t),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this.treeControl.dataNodes=this._flattenedData.value}get data(){return this._data.value}constructor(t,d=[]){super(),this.treeControl=t,this._flattenedData=new v([]),this._expandedData=new v([]),this._data=new v([]),this._treeFlattener=new q,this.data=d}connect(t){let d=[t.viewChange,this.treeControl.expansionModel.changed,this._flattenedData];return J(...d).pipe(Y(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this.treeControl)),this._expandedData.value)))}disconnect(){}},pe=class extends P{constructor(){super(t=>t.level,t=>t.expandable)}},it=(()=>{let t=class t extends l{constructor(e,i,s){super(e,i),this._focusMonitor=s,this._focusMonitor.monitor(this._elementRef.nativeElement)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef.nativeElement),super.ngOnDestroy()}_focus(){this._tree.updateFocusedData(this._data)}focus(){this.actionItem?this.actionItem.focus?.():this._elementRef.nativeElement.focus()}};t.\u0275fac=function(i){return new(i||t)(a(g),a(u),a(Q))},t.\u0275cmp=M({type:t,selectors:[["nx-tree-node"]],contentQueries:function(i,s,n){if(i&1&&O(n,Ne,5),i&2){let o;C(o=N())&&(s.actionItem=o.first)}},hostAttrs:[1,"nx-tree__node"],hostVars:6,hostBindings:function(i,s){i&2&&(m("aria-expanded",s.isExpanded)("aria-level",s.role==="treeitem"?s.level+1:null)("role",s.role)("tabindex",-1),B("is-expanded",s.isExpanded))},inputs:{disabled:"disabled",tabIndex:"tabIndex"},exportAs:["nxTreeNode"],features:[x([{provide:l,useExisting:t}]),y],ngContentSelectors:Ce,decls:2,vars:0,consts:[[1,"nx-tree__node-box"]],template:function(i,s){i&1&&(ne(),ie(0,"div",0),re(1),se())},encapsulation:2});let r=t;return r})(),st=(()=>{let t=class t extends S{};t.\u0275fac=(()=>{let e;return function(s){return(e||(e=j(t)))(s||t)}})(),t.\u0275dir=h({type:t,selectors:[["","nxTreeNodeDef",""]],inputs:{when:["nxTreeNodeDefWhen","when"],data:["nxTreeNode","data"]},features:[x([{provide:S,useExisting:t}]),y]});let r=t;return r})(),ge=(()=>{let t=class t{constructor(e){this.viewContainer=e}};t.\u0275fac=function(i){return new(i||t)(a(k))},t.\u0275dir=h({type:t,selectors:[["","nxTreeNodeOutlet",""]]});let r=t;return r})(),be=/([%A-Z]+)$/i,nt=(()=>{let t=class t{set level(e){this._level=b(e),this._setPadding()}get level(){return this._level}set offset(e){this._offset=b(e),this._setPadding()}get offset(){return this._offset}set indent(e){let i=e,s="px";if(typeof e=="string"){let n=e.split(be);i=n[0],s=n[1]||s}this.indentUnits=s,this._indent=b(i),this._setPadding()}get indent(){return this._indent}constructor(e,i,s,n,o){this._treeNode=e,this._tree=i,this._renderer=s,this._element=n,this._dir=o,this.indentUnits="px",this._offset=0,this._indent=24,this._destroyed=new p,this._setPadding(),this._dir&&this._dir.change.pipe(D(this._destroyed)).subscribe(()=>this._setPadding(!0)),e._dataChanges.pipe(D(this._destroyed)).subscribe(()=>this._setPadding())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){let e=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,i=this._level||e;return i?`${i*this._indent+this._offset}${this.indentUnits}`:null}_setPadding(e=!1){let i=this._paddingIndent();if(i!==this._currentPadding||e){let s=this._element.nativeElement,n=this._dir&&this._dir.value==="rtl"?"paddingRight":"paddingLeft",o=n==="paddingLeft"?"paddingRight":"paddingLeft";this._renderer.setStyle(s,n,i),this._renderer.setStyle(s,o,null),this._currentPadding=i}}};t.\u0275fac=function(i){return new(i||t)(a(l),a(u),a(te),a(g),a(U,8))},t.\u0275dir=h({type:t,selectors:[["","nxTreeNodePadding",""]],hostVars:2,hostBindings:function(i,s){i&2&&B("nx-tree-node--with-padding",!0)},inputs:{level:["nxTreeNodePadding","level"],offset:["nxTreeNodePaddingOffset","offset"],indent:["nxTreeNodePaddingIndent","indent"]}});let r=t;return r})(),rt=(()=>{let t=class t extends W{set recursive(e){this._recursive=A(e)}get recursive(){return this._recursive}};t.\u0275fac=(()=>{let e;return function(s){return(e||(e=j(t)))(s||t)}})(),t.\u0275dir=h({type:t,selectors:[["","nxTreeNodeToggle",""]],inputs:{recursive:["nxTreeNodeToggleRecursive","recursive"]},features:[x([{provide:W,useExisting:t}]),y]});let r=t;return r})(),ot=(()=>{let t=class t extends u{set tabIndex(e){this._userTabIndex=e}constructor(e,i,s,n,o){super(e,i),this._cdr=i,this.dir=s,this._elementRef=n,this._focusMonitor=o,this.nodeMap=new Map,this.childrenMap=new Map,this.parentMap=new Map,this._tabIndex=0,this._userTabIndex=null,this._wrapperOnDestroy=new p}ngOnInit(){super.ngOnInit(),this._monitorTreeFocus()}ngOnDestroy(){super.ngOnDestroy(),this._wrapperOnDestroy.next(),this._wrapperOnDestroy.complete()}get focusedData(){return this._focusedData}insertToA11yNodeTracking(e,i,s,n){this.nodeMap.set(i,s),n&&this.parentMap.set(i,n),this._getChildrenList(n).includes(i)||this._getChildrenList(n).splice(e,0,i)}removeFromA11yNodeTracking(e,i){let n=this._getChildrenList(i).splice(e,1)[0];n&&n===this._focusedData&&this._changeFocusedData(this._getNextVisibleNode()),this.nodeMap.delete(n),this.parentMap.delete(n),this.childrenMap.delete(n)}moveInA11yNodeTracking(e,i,s){let n=this._getChildrenList(s),o=n.splice(e,1);n.splice(i,0,o[0])}updateFocusedData(e){this._focusedData=e}focus(){this._focusedData?this._changeFocusedData(this._focusedData):this.focusFirstVisibleNode()}focusFirstVisibleNode(){this._changeFocusedData(this._getFirstVisibleNode())}focusLastVisibleNode(){this._changeFocusedData(this._getLastVisibleNode())}focusPreviousVisibleNode(){if(!this._focusedData)return this.focusLastVisibleNode();this._changeFocusedData(this._getPreviousVisibleNode())}focusNextVisibleNode(){if(!this._focusedData)return this.focusFirstVisibleNode();this._changeFocusedData(this._getNextVisibleNode())}collapseCurrentFocusedNode(){this._focusedData&&this.treeControl&&(this.treeControl.isExpanded(this._focusedData)?this.treeControl.collapse(this._focusedData):this._changeFocusedData(this._getParentNode()))}expandCurrentFocusedNode(){this._focusedData&&this.treeControl&&(this.treeControl.isExpanded(this._focusedData)?this._changeFocusedData(this._getNextVisibleNode()):this.treeControl.expand(this._focusedData))}expandAllNodes(){this.treeControl&&this.treeControl.expandAll()}toggleCurrentFocusedNode(){this._focusedData&&this.treeControl&&this.treeControl.toggle(this._focusedData)}_isRtl(){return this.dir&&this.dir.value==="rtl"}_handleKeydown(e){switch(e.keyCode){case 36:this.focusFirstVisibleNode(),e.preventDefault();break;case 35:this.focusLastVisibleNode(),e.preventDefault();break;case 38:this.focusPreviousVisibleNode(),e.preventDefault();break;case 40:this.focusNextVisibleNode(),e.preventDefault();break;case 37:this._isRtl()?this.expandCurrentFocusedNode():this.collapseCurrentFocusedNode(),e.preventDefault();break;case 39:this._isRtl()?this.collapseCurrentFocusedNode():this.expandCurrentFocusedNode(),e.preventDefault();break;case 106:this.expandAllNodes(),e.preventDefault();break;default:}}_changeFocusedData(e){e&&(this._focusedData=e,this.nodeMap.has(this._focusedData)&&this.nodeMap.get(this._focusedData).focus())}_getFirstVisibleNode(){return this._getChildrenList()[0]}_getLastVisibleNode(){let e=this._getChildrenList();return this._getLastChild(e[e.length-1])}_getPreviousVisibleNode(){if(!this._focusedData)return;let e=this.parentMap.get(this._focusedData),i=this.childrenMap.get(e),s=i.indexOf(this._focusedData);if(this.treeControl.isExpanded(this._focusedData)||this._removeChildren(),s===0)return e;if(s>0)return this._getLastChild(i[s-1])}_getNextVisibleNode(){if(!this._focusedData)return;let e=this.treeControl.isExpanded(this._focusedData);if(e||this._removeChildren(),this.childrenMap.has(this._focusedData)&&this.treeControl&&e){let s=this._getChildrenList(this._focusedData);if(s.length)return s[0]}let i=this._focusedData;for(;i;){let s=this.parentMap.get(i),n=this.childrenMap.get(s),o=n.indexOf(i);if(o===n.length-1)i=s;else if(o>-1)return n[o+1]}}_getParentNode(){if(this.parentMap.has(this._focusedData))this._changeFocusedData(this.parentMap.get(this._focusedData));else if(this.treeControl.getLevel){let e=this._getChildrenList(),i=e.indexOf(this._focusedData),s=this.treeControl.getLevel(this._focusedData)-1;if(i<=0)return;for(let n=i-1;n>=0;n--)if(this.treeControl.getLevel(e[n])===s)return e[n]}}_removeChildren(){let e=this.parentMap.get(this._focusedData),i=this._getChildrenList(),s=i.indexOf(this._focusedData),n=this._getNestLevels(i,s);n.forEach(c=>{this.nodeMap.delete(c),this.parentMap.delete(c)});let o=i.filter(c=>!n.includes(c));this.childrenMap.set(e,o)}_getNestLevels(e,i){let s=e[i]?.level,n=[],o=i+1;for(;o<e.length;){let c=e[o];if(c.level<=s)break;n.push(c),o++}return n}_getChildrenList(e){return this.childrenMap.has(e)||this.childrenMap.set(e,[]),this.childrenMap.get(e)}_getLastChild(e){let i=e;for(;i&&this.childrenMap.has(i)&&this.treeControl&&this.treeControl.isExpanded(i);){let s=this._getChildrenList(i);if(s.length)i=s[s.length-1];else break}return i}insertNode(e,i,s,n){super.insertNode(e,i,s,n),l.mostRecentTreeNode&&(this.insertToA11yNodeTracking(i,e,l.mostRecentTreeNode,n),l.mostRecentTreeNode.focus())}renderNodeChanges(e,i=this._dataDiffer,s=this._nodeOutlet.viewContainer,n){super.renderNodeChanges(e,i,s,n);let o=i.diff(e);o&&o.forEachOperation((c,_,f)=>{f==null?this.removeFromA11yNodeTracking(_,n):c.previousIndex!==null&&this.moveInA11yNodeTracking(_,f,n)})}_monitorTreeFocus(){this._focusMonitor.monitor(this._elementRef.nativeElement,!0).pipe(D(this._wrapperOnDestroy)).subscribe(e=>{let i=e?-1:this._userTabIndex||0;this._tabIndex!==i&&(this._tabIndex=i,this._cdr.markForCheck())})}};t.\u0275fac=function(i){return new(i||t)(a(I),a(T),a(U,8),a(g),a(Q))},t.\u0275cmp=M({type:t,selectors:[["nx-tree"]],viewQuery:function(i,s){if(i&1&&R(ge,7),i&2){let n;C(n=N())&&(s._nodeOutlet=n.first)}},hostAttrs:["role","tree",1,"nx-tree","cdk-tree"],hostVars:1,hostBindings:function(i,s){i&1&&F("keydown",function(o){return s._handleKeydown(o)})("focus",function(){return s.focus()}),i&2&&m("tabindex",s._tabIndex)},inputs:{tabIndex:"tabIndex"},exportAs:["nxTree"],features:[x([{provide:u,useExisting:t}]),y],decls:1,vars:0,consts:[["nxTreeNodeOutlet",""]],template:function(i,s){i&1&&L(0,0)},dependencies:[ge],styles:[`:host.nx-tree{display:block}.nx-tree__node{display:block;overflow:hidden}.nx-tree__node.cdk-keyboard-focused{box-shadow:var(--focus-inset-box-shadow);border-radius:8px}@media screen and (forced-colors: active){.nx-tree__node.cdk-keyboard-focused{box-shadow:inset 0 0 0 4px CanvasText,inset 0 0 0 6px background;border:4px solid CanvasText}}
`],encapsulation:2,changeDetection:0});let r=t;return r})(),dt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=w({type:t}),t.\u0275inj=E({imports:[ue,de]});let r=t;return r})();export{Ne as a,fe as b,pe as c,it as d,st as e,nt as f,rt as g,ot as h,dt as i};
